import { translateWithGemini } from './geminiService';

/**
 * ì „ë¬¸ì ì¸ AI í†µì‹ ë¬¸ ë§ˆë²•ì‚¬ ì„œë¹„ìŠ¤
 * ì—°êµ¬ì¡°ì‚¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ êµì‚¬ ì „ë¬¸ì„± ë°˜ì˜ í†µì‹ ë¬¸ ìƒì„±
 */

// í•™êµê¸‰ë³„ ë§ì¶¤í˜• ì¹´í…Œê³ ë¦¬ ë° ì „ë¬¸ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
const PROFESSIONAL_CATEGORY_PROMPTS = {
  // ì„±ì  í†µì§€ ë° ê°œë³„ í”¼ë“œë°±
  individual_feedback: {
    name: 'ê°œë³„ í•™ìƒ ì„±ì í†µì§€í‘œ ê°€ì •í†µì‹ ë¬¸',
    description: 'ê°œë³„ í•™ìƒì˜ ì„±ì¥ê³¼ ë°œë‹¬ì„ ë‹´ì€ ë§ì¶¤í˜• í†µì‹ ë¬¸',
    template: `ë‹¹ì‹ ì€ 20ë…„ ê²½ë ¥ì˜ ì „ë¬¸ êµì‚¬ì…ë‹ˆë‹¤. ë‹¤ìŒ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°œë³„ í•™ìƒì„ ìœ„í•œ ë”°ëœ»í•˜ê³  ì „ë¬¸ì ì¸ ê°€ì •í†µì‹ ë¬¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.

í•™ìƒ ì •ë³´:
- í•™ìƒëª…: {studentName}
- í•™ê¸‰: {grade}í•™ë…„ {classNumber}ë°˜
- í‰ê°€ ê¸°ê°„: {evaluationPeriod}

í•™ìƒ íŠ¹ì„± ë° ì„±ì¥ ë‚´ìš©:
- í•™ìŠµ íƒœë„: {learningAttitude}
- ì„±ê²© ë° íŠ¹ì„±: {personalityTraits}
- í•™ì—… ì„±ì·¨: {academicAchievement}
- êµìš° ê´€ê³„: {peerRelationship}
- íŠ¹ë³„ í™œë™: {specialActivities}
- ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„: {improvementAreas}

ë‹¤ìŒ êµ¬ì¡°ë¡œ ì‘ì„±í•˜ë˜, êµì‚¬ì˜ ë”°ëœ»í•¨ê³¼ ì „ë¬¸ì„±ì´ ë“œëŸ¬ë‚˜ë„ë¡ í•´ì£¼ì„¸ìš”:

1. **ì •ì¤‘í•œ ì¸ì‚¬ (3-4ì¤„)**
   - "ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ? {grade}í•™ë…„ {classNumber}ë°˜ ë‹´ì„ êµì‚¬ì…ë‹ˆë‹¤."
   - ê³„ì ˆê°ì´ë‚˜ ì‹œê¸°ì  ìƒí™©ì„ ìì—°ìŠ¤ëŸ½ê²Œ ì–¸ê¸‰
   - í•™ë¶€ëª¨ë‹˜ê»˜ ê°ì‚¬ ì¸ì‚¬

2. **í•™ìƒ ê°œë³„ ê´€ì°° ë° ì„±ì¥ ìŠ¤í† ë¦¬ (8-12ì¤„)**
   - êµ¬ì²´ì ì¸ ì—í”¼ì†Œë“œë‚˜ ê´€ì°° ë‚´ìš© í¬í•¨
   - "â—‹â—‹ì´ëŠ” ~í•œ ëª¨ìŠµì„ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤" í˜•íƒœì˜ ì„œìˆ 
   - ê¸ì •ì  ë³€í™”ì™€ ì„±ì¥ í¬ì¸íŠ¸ ê°•ì¡°
   - í•™ìŠµ íƒœë„, ì„±ê²©, êµìš° ê´€ê³„ì˜ ê· í˜•ìˆëŠ” ì„œìˆ 

3. **í•™ì—… ì„±ì·¨ ë° ë°œì „ ë°©í–¥ (5-7ì¤„)**
   - êµ¬ì²´ì ì¸ êµê³¼ë³„ ì„±ì·¨ ìƒí™©
   - ë…¸ë ¥í•œ ë¶€ë¶„ì— ëŒ€í•œ ì¸ì •ê³¼ ê²©ë ¤
   - ì•ìœ¼ë¡œì˜ ë°œì „ ê°€ëŠ¥ì„± ì œì‹œ

4. **ê°€ì •ê³¼ì˜ í˜‘ë ¥ ìš”ì²­ (3-5ì¤„)**
   - êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ í˜‘ë ¥ ë°©ì•ˆ
   - í•™ìƒì˜ íŠ¹ì„±ì— ë§ëŠ” ë§ì¶¤í˜• ì¡°ì–¸
   - ê²©ë ¤ ìœ„ì£¼ì˜ ê¸ì •ì  í‘œí˜„

5. **ë”°ëœ»í•œ ë§ˆë¬´ë¦¬ (2-3ì¤„)**
   - í•™ìƒì— ëŒ€í•œ ì• ì •ê³¼ ë¯¿ìŒ í‘œí˜„
   - ê°€ì •ì˜ ê±´ê°•ê³¼ í–‰ë³µì„ ê¸°ì›í•˜ëŠ” ì¸ì‚¬

**ì‘ì„± ì›ì¹™:**
- í•™ìƒì˜ ì´ë¦„ì„ ìì—°ìŠ¤ëŸ½ê²Œ 3-4íšŒ ì–¸ê¸‰
- êµ¬ì²´ì ì¸ í–‰ë™ì´ë‚˜ ìƒí™©ì„ ì˜ˆì‹œë¡œ ì œì‹œ
- '~ìŠµë‹ˆë‹¤', '~ì…ë‹ˆë‹¤' ì¡´ëŒ€ë²• ì¼ê´€ ì‚¬ìš©
- ë¶€ì •ì  í‘œí˜„ë³´ë‹¤ëŠ” ë°œì „ ê°€ëŠ¥ì„±ìœ¼ë¡œ ì „í™˜í•˜ì—¬ í‘œí˜„
- í•™ë¶€ëª¨ê°€ ìë…€ë¥¼ ë” ì´í•´í•  ìˆ˜ ìˆë„ë¡ ë„ì›€ì´ ë˜ëŠ” ë‚´ìš© í¬í•¨
- êµì‚¬ë¡œì„œì˜ ë”°ëœ»í•œ ë§ˆìŒê³¼ ì „ë¬¸ì  ê´€ì°°ë ¥ì´ ë“œëŸ¬ë‚˜ë„ë¡ ì‘ì„±

ì „ì²´ ë¶„ëŸ‰: 15-20ì¤„ ë‚´ì™¸ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`
  },

  // í•™ê¸°ë§ ì¢…í•© í†µì‹ ë¬¸
  semester_summary: {
    name: 'í•™ê¸°ë§ ì¢…í•© ê°€ì •í†µì‹ ë¬¸',
    description: 'í•œ í•™ê¸°ë¥¼ ë§ˆë¬´ë¦¬í•˜ëŠ” ì¢…í•©ì ì¸ í•™ê¸‰ í†µì‹ ë¬¸',
    template: `ë‹¹ì‹ ì€ ê²½í—˜ ë§ì€ êµì‚¬ë¡œì„œ í•œ í•™ê¸°ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©° í•™ê¸‰ ì „ì²´ í•™ë¶€ëª¨ë‹˜ê»˜ ë³´ë‚´ëŠ” ë”°ëœ»í•œ í†µì‹ ë¬¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.

í•™ê¸‰ ì •ë³´:
- í•™ê¸‰: {grade}í•™ë…„ {classNumber}ë°˜
- í•™ê¸°: {semester}
- ì£¼ìš” í™œë™: {majorActivities}
- í•™ê¸‰ íŠ¹ì„±: {classCharacteristics}
- ì„±ê³¼ ë° ì„±ì¥: {achievements}
- ê°ì‚¬ ì¸ì‚¬ ëŒ€ìƒ: {gratitudeTargets}

ë‹¤ìŒ êµ¬ì¡°ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:

1. **ê³„ì ˆê° ìˆëŠ” ì¸ì‚¬ (4-5ì¤„)**
   - ê³„ì ˆì˜ ë³€í™”ì™€ ì‹œê°„ì˜ íë¦„ì„ ìì—°ìŠ¤ëŸ½ê²Œ ì–¸ê¸‰
   - í•œ í•™ê¸° ë™ì•ˆì˜ ì†Œê°ì„ ë‹´ì€ ë”°ëœ»í•œ ì¸ì‚¬
   - í•™ë¶€ëª¨ë‹˜ì˜ ì§€ì›ì— ëŒ€í•œ ê°ì‚¬

2. **í•™ê¸‰ì˜ ì„±ì¥ ìŠ¤í† ë¦¬ (10-12ì¤„)**
   - í•™ê¸° ì´ˆì™€ í˜„ì¬ì˜ ë³€í™”ëœ ëª¨ìŠµ ë¹„êµ
   - êµ¬ì²´ì ì¸ í•™ê¸‰ í™œë™ê³¼ ì—í”¼ì†Œë“œ ì†Œê°œ
   - ì•„ì´ë“¤ì˜ ê°œë³„ì , ì§‘ë‹¨ì  ì„±ì¥ ì‚¬ë¡€
   - "ì²˜ìŒì—ëŠ”... ì´ì œëŠ”..." í˜•íƒœì˜ ëŒ€ë¹„ í‘œí˜„ í™œìš©

3. **êµìœ¡í™œë™ ì„±ê³¼ ë° íŠ¹ë³„í•œ ìˆœê°„ë“¤ (6-8ì¤„)**
   - ì£¼ìš” êµìœ¡í™œë™ê³¼ ê·¸ ì˜ë¯¸
   - ê¸°ì–µì— ë‚¨ëŠ” íŠ¹ë³„í•œ ìˆœê°„ë“¤
   - ì•„ì´ë“¤ì´ ë³´ì—¬ì¤€ ê°ë™ì ì¸ ëª¨ìŠµë“¤

4. **í•™ë¶€ëª¨ë‹˜ê»˜ ê°ì‚¬ ì¸ì‚¬ (4-5ì¤„)**
   - êµ¬ì²´ì ì¸ í˜‘ë ¥ ì‚¬ë¡€ì— ëŒ€í•œ ê°ì‚¬
   - ì•„ì´ë“¤ ì–‘ìœ¡ì— ëŒ€í•œ ì¸ì •ê³¼ ê²©ë ¤
   - ê°€ì •ê³¼ í•™êµì˜ í˜‘ë ¥ ê°€ì¹˜ ê°•ì¡°

5. **ì•ìœ¼ë¡œì˜ ë‹¤ì§ê³¼ ê¸°ì› (3-4ì¤„)**
   - ìƒˆ í•™ê¸°ë‚˜ ë°©í•™ì— ëŒ€í•œ ê¸°ëŒ€ì™€ ë‹¹ë¶€
   - ê±´ê°•ê³¼ í–‰ë³µì— ëŒ€í•œ ê¸°ì›
   - ì§€ì†ì ì¸ ê´€ì‹¬ê³¼ í˜‘ë ¥ ë¶€íƒ

**ì‘ì„± ì›ì¹™:**
- ê°ì •ì´ í’ë¶€í•˜ë©´ì„œë„ í’ˆê²© ìˆëŠ” ë¬¸ì²´
- êµ¬ì²´ì ì¸ ì—í”¼ì†Œë“œë¡œ ìƒìƒí•¨ ë”í•˜ê¸°
- êµì‚¬ë¡œì„œì˜ ë³´ëŒê³¼ ê°ë™ì´ ìì—°ìŠ¤ëŸ½ê²Œ ë“œëŸ¬ë‚˜ë„ë¡
- í•™ë¶€ëª¨ì™€ í•™ìƒ ëª¨ë‘ë¥¼ ì•„ìš°ë¥´ëŠ” ë”°ëœ»í•œ ì‹œì„ 
- ê²©ì‹ì„ ê°–ì¶”ë©´ì„œë„ ì¹œê·¼í•œ ì–´ì¡°

ì „ì²´ ë¶„ëŸ‰: 25-30ì¤„ ë‚´ì™¸ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`
  },

  // í–‰ì‚¬ ì•ˆë‚´ í†µì‹ ë¬¸
  event_announcement: {
    name: 'í•™êµ í–‰ì‚¬ ì•ˆë‚´ í†µì‹ ë¬¸',
    description: 'í•™êµ í–‰ì‚¬ì— ëŒ€í•œ ì „ë¬¸ì ì´ê³  ìƒì„¸í•œ ì•ˆë‚´',
    template: `êµìœ¡ ì „ë¬¸ê°€ë¡œì„œ í•™ë¶€ëª¨ë‹˜ë“¤ê»˜ í•™êµ í–‰ì‚¬ë¥¼ ì•ˆë‚´í•˜ëŠ” ê³µì‹ì ì´ë©´ì„œë„ ë”°ëœ»í•œ í†µì‹ ë¬¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.

í–‰ì‚¬ ì •ë³´:
- í–‰ì‚¬ëª…: {eventName}
- ì¼ì‹œ: {eventDate}
- ì¥ì†Œ: {eventLocation}
- ëŒ€ìƒ: {targetParticipants}
- ëª©ì  ë° ì˜ë¯¸: {eventPurpose}
- ì¤€ë¹„ë¬¼: {requiredItems}
- ì¼ì •í‘œ: {eventSchedule}
- ì£¼ì˜ì‚¬í•­: {precautions}
- ì°¸ì—¬ ë°©ë²•: {participationMethod}

ë‹¤ìŒ êµ¬ì¡°ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:

1. **ì •ì¤‘í•œ ì¸ì‚¬ ë° í–‰ì‚¬ ì†Œê°œ (4-5ì¤„)**
   - ê³„ì ˆì´ë‚˜ ì‹œê¸°ì— ë§ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ì¸ì‚¬
   - í–‰ì‚¬ëª…ê³¼ ê°œìµœ ì·¨ì§€ ê°„ëµ ì†Œê°œ
   - í•™ë¶€ëª¨ë‹˜ì˜ ì§€ì†ì ì¸ ê´€ì‹¬ì— ê°ì‚¬

2. **í–‰ì‚¬ì˜ êµìœ¡ì  ì˜ë¯¸ì™€ ê°€ì¹˜ (6-7ì¤„)**
   - í–‰ì‚¬ê°€ í•™ìƒë“¤ì—ê²Œ ì£¼ëŠ” êµìœ¡ì  íš¨ê³¼
   - ì„±ì¥ê³¼ ë°œë‹¬ì— ë¯¸ì¹˜ëŠ” ê¸ì •ì  ì˜í–¥
   - ê³µë™ì²´ ì˜ì‹ì´ë‚˜ í˜‘ë ¥ ì •ì‹  í•¨ì–‘ ì¸¡ë©´
   - í•™ë¶€ëª¨ ì°¸ì—¬ì˜ ì˜ë¯¸ì™€ ì¤‘ìš”ì„±

3. **êµ¬ì²´ì ì¸ í–‰ì‚¬ ì •ë³´ (8-10ì¤„)**
   - ì¼ì‹œ, ì¥ì†Œ, ëŒ€ìƒì„ ëª…í™•í•˜ê²Œ ëª…ì‹œ
   - ìƒì„¸í•œ ì¼ì •ê³¼ í”„ë¡œê·¸ë¨ ì†Œê°œ
   - ì¤€ë¹„ë¬¼ê³¼ ë³µì¥ì— ëŒ€í•œ êµ¬ì²´ì  ì•ˆë‚´
   - êµí†µí¸ì´ë‚˜ ì£¼ì°¨ ê´€ë ¨ ì •ë³´ í¬í•¨

4. **ì°¸ì—¬ ë°©ë²• ë° í˜‘ì¡° ìš”ì²­ì‚¬í•­ (5-6ì¤„)**
   - ì°¸ì—¬ ì‹ ì²­ ë°©ë²•ê³¼ ë§ˆê°ì¼
   - í•™ë¶€ëª¨ë‹˜ê»˜ ë‹¹ë¶€í•˜ê³  ì‹¶ì€ ì‚¬í•­
   - ì•ˆì „ ê´€ë ¨ ì£¼ì˜ì‚¬í•­
   - ê¶ê¸ˆí•œ ì  ë¬¸ì˜ ë°©ë²•

5. **ë”°ëœ»í•œ ë§ˆë¬´ë¦¬ (3-4ì¤„)**
   - ë§ì€ ì°¸ì—¬ë¥¼ ë‹¹ë¶€í•˜ëŠ” ì •ì¤‘í•œ ìš”ì²­
   - ê°€ì¡± ëª¨ë‘ì˜ ê±´ê°•ê³¼ í–‰ë³µ ê¸°ì›
   - í–‰ì‚¬ ì„±ê³µì„ ìœ„í•œ í˜‘ë ¥ ê°ì‚¬

**ì‘ì„± ì›ì¹™:**
- ê³µì‹ì ì´ë©´ì„œë„ ì¹œê·¼í•œ ì–´ì¡° ìœ ì§€
- êµìœ¡ì  ê°€ì¹˜ì™€ ì˜ë¯¸ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ê°•ì¡°
- êµ¬ì²´ì ì´ê³  ëª…í™•í•œ ì •ë³´ ì œê³µ
- í•™ë¶€ëª¨ì˜ ì…ì¥ì„ ê³ ë ¤í•œ ë°°ë ¤ ìˆëŠ” í‘œí˜„
- í–‰ì‚¬ì— ëŒ€í•œ ê¸°ëŒ€ê°ê³¼ ì°¸ì—¬ ì˜ìš• ê³ ì·¨

ì „ì²´ ë¶„ëŸ‰: 25-28ì¤„ ë‚´ì™¸ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`
  },

  // ê°€ì • ì—°ê³„ êµìœ¡ ì•ˆë‚´
  home_education_guide: {
    name: 'ê°€ì • ì—°ê³„ êµìœ¡ ì•ˆë‚´ë¬¸',
    description: 'ê°€ì •ì—ì„œì˜ êµìœ¡ í˜‘ë ¥ì„ ìœ„í•œ ì „ë¬¸ì  ê°€ì´ë“œ',
    template: `êµìœ¡ ì „ë¬¸ê°€ë¡œì„œ ê°€ì •ì—ì„œì˜ êµìœ¡ í™œë™ì— ëŒ€í•´ êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì¸ ê°€ì´ë“œë¥¼ ì œê³µí•˜ëŠ” í†µì‹ ë¬¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.

êµìœ¡ ì£¼ì œ:
- ì£¼ì œëª…: {educationTopic}
- êµìœ¡ ëª©í‘œ: {educationGoals}
- ëŒ€ìƒ ì—°ë ¹: {targetAge}
- ê¸°ê°„: {duration}
- ê°€ì •ì—ì„œ í•  ìˆ˜ ìˆëŠ” í™œë™: {homeActivities}
- ì£¼ì˜ì‚¬í•­: {precautions}
- ê¸°ëŒ€ íš¨ê³¼: {expectedOutcomes}

ë‹¤ìŒ êµ¬ì¡°ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:

1. **êµìœ¡ì  ì¸ì‚¬ë§ (4-5ì¤„)**
   - ê°€ì • êµìœ¡ì˜ ì¤‘ìš”ì„±ì— ëŒ€í•œ ì–¸ê¸‰
   - í•™ë¶€ëª¨ë‹˜ì˜ êµìœ¡ íŒŒíŠ¸ë„ˆë¡œì„œì˜ ì—­í•  ì¸ì •
   - ì´ë²ˆ ì£¼ì œ êµìœ¡ì˜ í•„ìš”ì„± ê°„ëµ ì†Œê°œ

2. **êµìœ¡ ì£¼ì œì˜ ì¤‘ìš”ì„±ê³¼ ëª©í‘œ (7-8ì¤„)**
   - í˜„ì¬ ì‹œê¸° ì•„ì´ë“¤ì—ê²Œ í•„ìš”í•œ êµìœ¡ì„ì„ ê°•ì¡°
   - êµ¬ì²´ì ì¸ êµìœ¡ ëª©í‘œì™€ ê¸°ëŒ€ íš¨ê³¼
   - ê°€ì •ê³¼ í•™êµê°€ í•¨ê»˜ í•  ë•Œì˜ ì‹œë„ˆì§€ íš¨ê³¼
   - ì•„ì´ì˜ ê±´ê°•í•œ ì„±ì¥ê³¼ ë°œë‹¬ì— ë¯¸ì¹˜ëŠ” ì˜í–¥

3. **êµ¬ì²´ì ì¸ ê°€ì • êµìœ¡ ë°©ë²• (12-15ì¤„)**
   - ì¼ìƒìƒí™œì—ì„œ ì‰½ê²Œ ì‹¤ì²œí•  ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤
   - ì—°ë ¹ì— ì í•©í•œ ë‹¨ê³„ë³„ ì ‘ê·¼ë²•
   - êµ¬ì²´ì ì¸ ëŒ€í™”ë²•ì´ë‚˜ í™œë™ ì˜ˆì‹œ
   - "ì˜ˆë¥¼ ë“¤ì–´..." í˜•íƒœë¡œ ì‹¤ì œ ìƒí™© ì œì‹œ
   - ë¶€ëª¨ì˜ ì—­í• ê³¼ ì•„ì´ì˜ ë°˜ì‘ì— ëŒ€í•œ ì´í•´

4. **ì£¼ì˜ì‚¬í•­ ë° ë„ì›€ ìš”ì²­ (5-6ì¤„)**
   - êµìœ¡ ì‹œ ìœ ì˜í•´ì•¼ í•  ì ë“¤
   - ì•„ì´ì˜ ê°œë³„ íŠ¹ì„±ì„ ê³ ë ¤í•œ ì¡°ì–¸
   - ì–´ë ¤ì›€ì´ ìˆì„ ë•Œì˜ ëŒ€ì²˜ ë°©ë²•
   - ì–¸ì œë“  ìƒë‹´ ê°€ëŠ¥í•¨ì„ ì•ˆë‚´

5. **ê²©ë ¤ì™€ ì‘ì›ì˜ ë§ˆë¬´ë¦¬ (3-4ì¤„)**
   - í•™ë¶€ëª¨ë‹˜ì˜ ë…¸ë ¥ì— ëŒ€í•œ ê²©ë ¤
   - ì•„ì´ë“¤ì˜ ì„±ì¥ì— ëŒ€í•œ ê¸ì •ì  ì „ë§
   - ê°€ì •ê³¼ í•™êµì˜ ì§€ì†ì  í˜‘ë ¥ ë‹¹ë¶€

**ì‘ì„± ì›ì¹™:**
- ì‹¤ìš©ì ì´ê³  êµ¬ì²´ì ì¸ ë°©ë²• ì œì‹œ
- êµìœ¡í•™ì  ì „ë¬¸ì„±ì´ ë“œëŸ¬ë‚˜ëŠ” ì¡°ì–¸
- í•™ë¶€ëª¨ì˜ ë¶€ë‹´ì„ ì¤„ì´ëŠ” í˜„ì‹¤ì  ì ‘ê·¼
- ì•„ì´ ì¤‘ì‹¬ì˜ ë°œë‹¬ ë‹¨ê³„ë³„ ê³ ë ¤
- ë”°ëœ»í•˜ë©´ì„œë„ ì „ë¬¸ì ì¸ ì–´ì¡°

ì „ì²´ ë¶„ëŸ‰: 30-35ì¤„ ë‚´ì™¸ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`
  },

  // ìƒí™œ ì§€ë„ ì•ˆë‚´
  life_guidance: {
    name: 'ìƒí™œì§€ë„ í˜‘ë ¥ ì•ˆë‚´ë¬¸',
    description: 'í•™ìƒ ìƒí™œì§€ë„ë¥¼ ìœ„í•œ ê°€ì •-í•™êµ í˜‘ë ¥ ì•ˆë‚´',
    template: `ìƒí™œì§€ë„ ì „ë¬¸ê°€ë¡œì„œ í•™ìƒë“¤ì˜ ê±´ì „í•œ ìƒí™œ ìŠµê´€ í˜•ì„±ì„ ìœ„í•œ ê°€ì •ê³¼ì˜ í˜‘ë ¥ ë°©ì•ˆì„ ì œì‹œí•˜ëŠ” í†µì‹ ë¬¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.

ì§€ë„ ë‚´ìš©:
- ì§€ë„ ì£¼ì œ: {guidanceTopic}
- í˜„ì¬ ìƒí™©: {currentSituation}
- ëª©í‘œ: {guidanceGoals}
- êµ¬ì²´ì  ë°©ë²•: {specificMethods}
- ê°€ì • í˜‘ë ¥ ì‚¬í•­: {homeCooperation}
- ê¸°ëŒ€ íš¨ê³¼: {expectedResults}

ë‹¤ìŒ êµ¬ì¡°ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:

1. **ìƒí™© ì¸ì‹ê³¼ ê³µê° (5-6ì¤„)**
   - í˜„ì¬ ì•„ì´ë“¤ì˜ ìƒí™©ì— ëŒ€í•œ ì´í•´ì™€ ê³µê°
   - ì‹œëŒ€ì  í™˜ê²½ ë³€í™”ê°€ ì•„ì´ë“¤ì—ê²Œ ë¯¸ì¹˜ëŠ” ì˜í–¥
   - í•™ë¶€ëª¨ë‹˜ë“¤ì˜ ê³ ë¯¼ê³¼ ê±±ì •ì— ëŒ€í•œ ì´í•´
   - í•¨ê»˜ í•´ê²°í•´ ë‚˜ê°€ì•¼ í•  ê³¼ì œì„ì„ ê°•ì¡°

2. **ìƒí™œì§€ë„ì˜ êµìœ¡ì  ì˜ë¯¸ (6-7ì¤„)**
   - ë‹¨ìˆœí•œ ê·œì œê°€ ì•„ë‹Œ ì„±ì¥ì„ ìœ„í•œ ì§€ë„ì„ì„ ê°•ì¡°
   - ì˜¬ë°”ë¥¸ ê°€ì¹˜ê´€ê³¼ íŒë‹¨ë ¥ í˜•ì„±ì˜ ì¤‘ìš”ì„±
   - ììœ¨ì„±ê³¼ ì±…ì„ê° ë°œë‹¬ì— ë¯¸ì¹˜ëŠ” ì˜í–¥
   - ë¯¸ë˜ ì‚¬íšŒ êµ¬ì„±ì›ìœ¼ë¡œì„œ í•„ìš”í•œ ì—­ëŸ‰

3. **êµ¬ì²´ì ì¸ ì§€ë„ ë°©ë²•ê³¼ ì „ëµ (10-12ì¤„)**
   - í•™êµì—ì„œ ì§„í–‰í•˜ê³  ìˆëŠ” ì§€ë„ ë°©ë²• ì†Œê°œ
   - íš¨ê³¼ì ì¸ ì§€ë„ë¥¼ ìœ„í•œ ì›ì¹™ê³¼ ë°©ë²•
   - ì•„ì´ë“¤ì˜ ìë°œì  ì°¸ì—¬ë¥¼ ì´ëŒì–´ë‚´ëŠ” ë°©ë²•
   - ê¸ì •ì  ê°•í™”ì™€ ê²©ë ¤ ì¤‘ì‹¬ì˜ ì ‘ê·¼
   - ê°œë³„ í•™ìƒ íŠ¹ì„±ì„ ê³ ë ¤í•œ ë§ì¶¤í˜• ì§€ë„

4. **ê°€ì •ì—ì„œì˜ í˜‘ë ¥ ë°©ì•ˆ (8-10ì¤„)**
   - ê°€ì •ì—ì„œ ì‹¤ì²œ ê°€ëŠ¥í•œ êµ¬ì²´ì  ë°©ë²•ë“¤
   - ì¼ê´€ì„± ìˆëŠ” ì§€ë„ë¥¼ ìœ„í•œ ê°€ì •-í•™êµ í˜‘ë ¥
   - ëŒ€í™”ì™€ ì†Œí†µì„ í†µí•œ ì´í•´ì™€ ê³µê° ì¦ì§„
   - ëª¨ë²”ì„ ë³´ì´ëŠ” ë¶€ëª¨ ì—­í• ì˜ ì¤‘ìš”ì„±
   - ì•„ì´ì˜ ìì¡´ê°ì„ ë†’ì´ëŠ” ë°©ë²•

5. **ì§€ì†ì  ì†Œí†µê³¼ ê²©ë ¤ (4-5ì¤„)**
   - ë³€í™”ì—ëŠ” ì‹œê°„ì´ í•„ìš”í•¨ì„ ì´í•´í•´ ì£¼ì‹¤ ê²ƒ ë‹¹ë¶€
   - ì‘ì€ ë³€í™”ì™€ ë…¸ë ¥ì— ëŒ€í•œ ì¸ì •ê³¼ ê²©ë ¤ ë¶€íƒ
   - ì–¸ì œë“  ìƒë‹´í•˜ê³  í˜‘ë ¥í•  ì¤€ë¹„ê°€ ë˜ì–´ ìˆìŒì„ ì•ˆë‚´
   - ì•„ì´ë“¤ì˜ ê±´ê°•í•œ ì„±ì¥ì— ëŒ€í•œ ë¯¿ìŒê³¼ ê¸°ëŒ€

**ì‘ì„± ì›ì¹™:**
- ë¹„ë‚œì´ë‚˜ ì§€ì ë³´ë‹¤ëŠ” ì´í•´ì™€ í˜‘ë ¥ ì¤‘ì‹¬
- êµ¬ì²´ì ì´ê³  ì‹¤ì²œ ê°€ëŠ¥í•œ ë°©ë²• ì œì‹œ
- ì•„ì´ë“¤ì— ëŒ€í•œ ì‚¬ë‘ê³¼ ë¯¿ìŒì´ ë°”íƒ•ì´ ë¨ì„ ê°•ì¡°
- í•™ë¶€ëª¨ì™€ êµì‚¬ê°€ í•¨ê»˜í•˜ëŠ” ë™ë°˜ìì  ê´€ê³„ ê°•ì¡°
- ê¸ì •ì ì´ê³  í¬ë§ì ì¸ ë¯¸ë˜ ì „ë§ ì œì‹œ

ì „ì²´ ë¶„ëŸ‰: 30-35ì¤„ ë‚´ì™¸ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`
  },

  // ì•ˆì „ êµìœ¡ í†µì‹ ë¬¸
  safety_education: {
    name: 'ì•ˆì „ êµìœ¡ ì•ˆë‚´ë¬¸',
    description: 'í•™ìƒ ì•ˆì „ì„ ìœ„í•œ ì „ë¬¸ì ì´ê³  ì²´ê³„ì ì¸ ì•ˆë‚´',
    template: `ì•ˆì „ êµìœ¡ ì „ë¬¸ê°€ë¡œì„œ í•™ìƒë“¤ì˜ ì•ˆì „í•œ í•™êµìƒí™œê³¼ ì¼ìƒìƒí™œì„ ìœ„í•œ ì¢…í•©ì ì¸ ì•ˆì „ êµìœ¡ ì•ˆë‚´ë¬¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.

ì•ˆì „ êµìœ¡ ì •ë³´:
- êµìœ¡ ì£¼ì œ: {safetyTopic}
- êµìœ¡ ë°°ê²½: {educationBackground}
- êµìœ¡ ë‚´ìš©: {educationContent}
- ì‹¤ì²œ ë°©ë²•: {practicalMethods}
- ìœ„í—˜ ìš”ì†Œ: {riskFactors}
- ì˜ˆë°© ìˆ˜ì¹™: {preventionRules}
- ë¹„ìƒì‹œ ëŒ€ì²˜ë²•: {emergencyResponse}

ë‹¤ìŒ êµ¬ì¡°ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:

1. **ì•ˆì „ì˜ ì¤‘ìš”ì„± ê°•ì¡° (5-6ì¤„)**
   - ì†Œì¤‘í•œ ì•„ì´ë“¤ì˜ ì•ˆì „ì´ ìµœìš°ì„ ì„ì„ ê°•ì¡°
   - ì˜ˆë°©ì˜ ì¤‘ìš”ì„±ê³¼ ì‚¬ì „ êµìœ¡ì˜ í•„ìš”ì„±
   - ê°€ì •ê³¼ í•™êµê°€ í•¨ê»˜ ë§Œë“¤ì–´ê°€ëŠ” ì•ˆì „í•œ í™˜ê²½
   - ì‘ì€ ê´€ì‹¬ê³¼ ì£¼ì˜ê°€ í° ì‚¬ê³ ë¥¼ ì˜ˆë°©í•¨ì„ ì–¸ê¸‰

2. **í˜„ì¬ ì•ˆì „ êµìœ¡ì˜ í•„ìš”ì„± (7-8ì¤„)**
   - ìµœê·¼ ì•ˆì „ ê´€ë ¨ ìƒí™©ì´ë‚˜ ì‚¬íšŒì  ì´ìŠˆ ì–¸ê¸‰
   - ìš°ë¦¬ ì•„ì´ë“¤ì´ ì§ë©´í•  ìˆ˜ ìˆëŠ” ìœ„í—˜ ìš”ì†Œë“¤
   - ì²´ê³„ì ì´ê³  ì§€ì†ì ì¸ ì•ˆì „ êµìœ¡ì˜ ì¤‘ìš”ì„±
   - ë‹¨ìˆœ ì§€ì‹ ì „ë‹¬ì´ ì•„ë‹Œ ìƒí™œ ì† ì‹¤ì²œ ëŠ¥ë ¥ ê¸°ë¥´ê¸°

3. **êµ¬ì²´ì ì¸ ì•ˆì „ êµìœ¡ ë‚´ìš© (12-15ì¤„)**
   - í•™êµì—ì„œ ì‹¤ì‹œí•˜ëŠ” ì•ˆì „ êµìœ¡ í”„ë¡œê·¸ë¨ ì†Œê°œ
   - ê° ìƒí™©ë³„ êµ¬ì²´ì ì¸ ì•ˆì „ ìˆ˜ì¹™ê³¼ ëŒ€ì²˜ ë°©ë²•
   - ì•„ì´ë“¤ì´ ì‰½ê²Œ ì´í•´í•˜ê³  ê¸°ì–µí•  ìˆ˜ ìˆëŠ” ë°©ë²•
   - ì‹¤ì œ ìƒí™©ì„ ê°€ì •í•œ ì‹œë®¬ë ˆì´ì…˜ êµìœ¡ ë‚´ìš©
   - ë˜ë˜ë“¤ê³¼ í•¨ê»˜í•˜ëŠ” í˜‘ë ¥ì  ì•ˆì „ ì˜ì‹ ê¸°ë¥´ê¸°

4. **ê°€ì •ì—ì„œì˜ ì•ˆì „ êµìœ¡ í˜‘ë ¥ (8-10ì¤„)**
   - ì¼ìƒìƒí™œì—ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ì•ˆì „ ì˜ì‹ ê¸°ë¥´ê¸°
   - ê°€ì¡±ì´ í•¨ê»˜ ì•ˆì „ ìˆ˜ì¹™ ì ê²€í•˜ê³  ì‹¤ì²œí•˜ê¸°
   - ì•„ì´ì™€ í•¨ê»˜í•˜ëŠ” ì•ˆì „ ê´€ë ¨ ëŒ€í™” ë°©ë²•
   - ìœ„í—˜ ìƒí™© ë°œìƒ ì‹œ ì¹¨ì°©í•œ ëŒ€ì²˜ ëŠ¥ë ¥ ê¸°ë¥´ê¸°
   - ì •ê¸°ì ì¸ ì•ˆì „ ì ê²€ê³¼ í™˜ê²½ ê°œì„ 

5. **ì§€ì†ì  ê´€ì‹¬ê³¼ í˜‘ë ¥ ë‹¹ë¶€ (4-5ì¤„)**
   - ì•ˆì „ì€ í•˜ë£¨ì•„ì¹¨ì— ì™„ì„±ë˜ì§€ ì•ŠëŠ” ì§€ì†ì  ê³¼ì œ
   - í•™ë¶€ëª¨ë‹˜ì˜ ê¾¸ì¤€í•œ ê´€ì‹¬ê³¼ êµìœ¡ ë¶€íƒ
   - í•™êµì™€ ê°€ì •ì˜ ê¸´ë°€í•œ í˜‘ë ¥ê³¼ ì†Œí†µ
   - ì•ˆì „í•œ ìš°ë¦¬ ì•„ì´ë“¤ì˜ ë¯¸ë˜ì— ëŒ€í•œ í™•ì‹ 

**ì‘ì„± ì›ì¹™:**
- ë¶ˆì•ˆê°ì„ ì£¼ì§€ ì•Šìœ¼ë©´ì„œë„ ê²½ê°ì‹¬ ìœ ë°œ
- êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì¸ ì•ˆì „ ìˆ˜ì¹™ ì œì‹œ
- ì•„ì´ë“¤ ëˆˆë†’ì´ì— ë§ëŠ” êµìœ¡ ë°©ë²• ì•ˆë‚´
- ê°€ì •ì—ì„œ ì‹¤ì²œ ê°€ëŠ¥í•œ í˜„ì‹¤ì  ë°©ì•ˆ ì œê³µ
- ì•ˆì „ì— ëŒ€í•œ ê¸ì •ì ì´ê³  ì ê·¹ì ì¸ ìì„¸ ê°•ì¡°

ì „ì²´ ë¶„ëŸ‰: 35-40ì¤„ ë‚´ì™¸ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`
  }
};

// í•™êµê¸‰ë³„ ì „ë¬¸ ë¬¸êµ¬ í…œí”Œë¦¿
const SCHOOL_LEVEL_EXPRESSIONS = {
  elementary: {
    greeting: [
      "ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ? í•­ìƒ ë”°ëœ»í•œ ê´€ì‹¬ìœ¼ë¡œ ì•„ì´ë“¤ì„ ì§€ì¼œë´ ì£¼ì‹œëŠ” í•™ë¶€ëª¨ë‹˜ë“¤ê»˜ ê¹Šì€ ê°ì‚¬ë¥¼ ë“œë¦½ë‹ˆë‹¤.",
      "ì‚¬ë‘í•˜ëŠ” ìš°ë¦¬ ì•„ì´ë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ì¦ê±°ìš´ í•™êµìƒí™œ ì†ì—ì„œ í•™ë¶€ëª¨ë‹˜ê»˜ ì•ˆë¶€ ë§ì”€ì„ ë“œë¦½ë‹ˆë‹¤.",
      "ì•„ì´ë“¤ì˜ ë§‘ì€ ì›ƒìŒì†Œë¦¬ê°€ ê°€ë“í•œ êµì‹¤ì—ì„œ í•™ë¶€ëª¨ë‹˜ê»˜ ë”°ëœ»í•œ ì¸ì‚¬ë¥¼ ì „í•´ë“œë¦½ë‹ˆë‹¤."
    ],
    student_reference: [
      "â—‹â—‹ì´ëŠ” ëŠ˜ ë°ì€ í‘œì •ìœ¼ë¡œ",
      "ìš°ë¦¬ â—‹â—‹ì´ê°€ ë³´ì—¬ì£¼ëŠ”",
      "â—‹â—‹ì´ì˜ ìˆœìˆ˜í•œ ë§ˆìŒì´",
      "â—‹â—‹ì´ë§Œì˜ íŠ¹ë³„í•œ ëª¨ìŠµì„"
    ],
    encouragement: [
      "ì•„ì´ë“¤ì˜ ë¬´í•œí•œ ê°€ëŠ¥ì„±ì„ ë¯¿ìœ¼ë©°",
      "í•œ ê±¸ìŒ í•œ ê±¸ìŒ ì„±ì¥í•˜ëŠ” ëª¨ìŠµì´",
      "ì‘ì€ ë³€í™” í•˜ë‚˜í•˜ë‚˜ê°€ ì†Œì¤‘í•œ",
      "ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ë§Œë“¤ì–´ë‚´ëŠ” ê¸°ì ì„"
    ],
    closing: [
      "ê°€ì •ì˜ ê±´ê°•ê³¼ í–‰ë³µì„ ì§„ì‹¬ìœ¼ë¡œ ê¸°ì›í•©ë‹ˆë‹¤.",
      "í•­ìƒ ì›ƒìŒì´ ê°€ë“í•œ í–‰ë³µí•œ ê°€ì • ë˜ì‹œê¸°ë¥¼ ë°”ëë‹ˆë‹¤.",
      "ê°€ì¡± ëª¨ë‘ì˜ ê±´ê°•ê³¼ í‰ì•ˆì„ ê¸°ë„í•©ë‹ˆë‹¤."
    ]
  },
  middle: {
    greeting: [
      "ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ? ì¤‘í•™êµ ì‹œê¸°ì˜ ì†Œì¤‘í•œ ì„±ì¥ê¸°ë¥¼ í•¨ê»˜ ì§€ì¼œë³´ë©° í•™ë¶€ëª¨ë‹˜ê»˜ ê°ì‚¬ ì¸ì‚¬ë¥¼ ë“œë¦½ë‹ˆë‹¤.",
      "ê¸‰ë³€í•˜ëŠ” ì‚¬ì¶˜ê¸° ì‹œê¸°, ì•„ì´ë“¤ê³¼ í•¨ê»˜ ê³ ë¯¼í•˜ê³  ì„±ì¥í•˜ëŠ” í•™ë¶€ëª¨ë‹˜ë“¤ê»˜ ê¹Šì€ ì¡´ê²½ì„ í‘œí•©ë‹ˆë‹¤.",
      "ì¤‘í•™ìƒì´ ë˜ì–´ í•œì¸µ ì„±ìˆ™í•´ì ¸ê°€ëŠ” ì•„ì´ë“¤ì„ ë³´ë©° í•™ë¶€ëª¨ë‹˜ê»˜ ì•ˆë¶€ë¥¼ ì—¬ì­™ìŠµë‹ˆë‹¤."
    ],
    student_reference: [
      "â—‹â—‹ì´ê°€ ì¤‘í•™ìƒì´ ë˜ë©´ì„œ ë³´ì—¬ì£¼ëŠ”",
      "ì‚¬ì¶˜ê¸° ì‹œê¸°ì„ì—ë„ ë¶ˆêµ¬í•˜ê³  â—‹â—‹ì´ëŠ”",
      "â—‹â—‹ì´ì˜ ìƒê°ê³¼ í–‰ë™ì´",
      "ì ì  ì–´ë¥¸ìŠ¤ëŸ¬ì›Œì§€ëŠ” â—‹â—‹ì´ì˜"
    ],
    encouragement: [
      "ì´ ì‹œê¸°ì˜ í˜¼ë€ê³¼ ê³ ë¯¼ë“¤ì´ ëª¨ë‘ ì„±ì¥ì˜ ê³¼ì •ì„ì„",
      "ì§„ì •í•œ ìì•„ë¥¼ ì°¾ì•„ê°€ëŠ” ì†Œì¤‘í•œ ì‹œê°„ì„ì„",
      "ì§€ê¸ˆì˜ ê²½í—˜ë“¤ì´ ë¯¸ë˜ì˜ ë°‘ê±°ë¦„ì´ ë  ê²ƒì„ì„",
      "ë¶€ëª¨ë‹˜ì˜ ì‚¬ë‘ê³¼ ë¯¿ìŒì´ ê°€ì¥ í° í˜ì´ ë¨ì„"
    ],
    closing: [
      "ì¤‘í•™êµ ì‹œê¸°ë¥¼ í˜„ëª…í•˜ê²Œ ê·¹ë³µí•´ ë‚˜ê°€ì‹œê¸°ë¥¼ ì‘ì›í•©ë‹ˆë‹¤.",
      "ì•„ì´ì™€ í•¨ê»˜ ì„±ì¥í•˜ëŠ” ì§€í˜œë¡œìš´ ê°€ì •ì´ ë˜ì‹œê¸°ë¥¼ ë°”ëë‹ˆë‹¤.",
      "ê°€ì¡± ê°„ì˜ ëŒ€í™”ì™€ ì´í•´ê°€ ë”ìš± ê¹Šì–´ì§€ê¸°ë¥¼ ê¸°ì›í•©ë‹ˆë‹¤."
    ]
  },
  high: {
    greeting: [
      "ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ? ì§„ë¡œì— ëŒ€í•œ ì§„ì§€í•œ ê³ ë¯¼ê³¼ í•¨ê»˜ ì„±ì¸ìœ¼ë¡œ ì„±ì¥í•´ê°€ëŠ” ì‹œê¸°ì— í•™ë¶€ëª¨ë‹˜ê»˜ ì¸ì‚¬ë“œë¦½ë‹ˆë‹¤.",
      "ëŒ€í•™ ì§„í•™ê³¼ ë¯¸ë˜ ì„¤ê³„ë¼ëŠ” ì¤‘ìš”í•œ ì‹œê¸°ì— ì•„ì´ë“¤ì„ ì§€ì¼œë´ ì£¼ì‹œëŠ” í•™ë¶€ëª¨ë‹˜ë“¤ê»˜ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.",
      "ê³ ë“±í•™êµ ì‹œê¸°ì˜ ì¹˜ì—´í•œ ê²½ìŸ ì†ì—ì„œë„ ì¸ì„±ì„ ìƒì§€ ì•Šë„ë¡ ì§€ë„í•´ì£¼ì‹œëŠ” í•™ë¶€ëª¨ë‹˜ê»˜ ê²½ì˜ë¥¼ í‘œí•©ë‹ˆë‹¤."
    ],
    student_reference: [
      "â—‹â—‹ì´ê°€ ê³ ë“±í•™ìƒìœ¼ë¡œì„œ ë³´ì—¬ì£¼ëŠ”",
      "ì§„ë¡œì— ëŒ€í•´ ì§„ì§€í•˜ê²Œ ê³ ë¯¼í•˜ëŠ” â—‹â—‹ì´ì˜",
      "ì„±ì¸ì´ ë˜ì–´ê°€ëŠ” â—‹â—‹ì´ì˜ ëª¨ìŠµì—ì„œ",
      "ë¯¸ë˜ì— ëŒ€í•œ ê¿ˆì„ í‚¤ì›Œê°€ëŠ” â—‹â—‹ì´ëŠ”"
    ],
    encouragement: [
      "í˜„ì¬ì˜ ë…¸ë ¥ì´ ë°ì€ ë¯¸ë˜ë¥¼ ë§Œë“¤ì–´ê°ˆ ê²ƒì„ì„",
      "ê¿ˆì„ í–¥í•œ ë„ì „ ì •ì‹ ì´ ê°€ì¥ ì†Œì¤‘í•¨ì„",
      "ì‹¤íŒ¨ì™€ ì¢Œì ˆë„ ì„±ì¥ì˜ ì¤‘ìš”í•œ ê²½í—˜ì„ì„",
      "ëê¹Œì§€ í¬ê¸°í•˜ì§€ ì•ŠëŠ” ì˜ì§€ê°€ ì„±ê³µì˜ ì—´ì‡ ì„ì„"
    ],
    closing: [
      "ê¿ˆì„ í–¥í•œ ì•„ì´ë“¤ì˜ ë„ì „ì„ ì‘ì›í•˜ë©°, ê°€ì •ì˜ í‰ì•ˆì„ ê¸°ì›í•©ë‹ˆë‹¤.",
      "ë¯¸ë˜ì˜ ì£¼ì—­ìœ¼ë¡œ ì„±ì¥í•  ì•„ì´ë“¤ê³¼ í•¨ê»˜ í•˜ëŠ” ë³´ëŒì°¬ ë‚˜ë‚  ë˜ì‹œê¸°ë¥¼ ë°”ëë‹ˆë‹¤.",
      "ì…ì‹œì˜ ë¶€ë‹´ ì†ì—ì„œë„ ê±´ê°•í•˜ê³  í–‰ë³µí•œ ê°€ì • ë˜ì‹œê¸°ë¥¼ ê¸°ë„í•©ë‹ˆë‹¤."
    ]
  }
};

// ì „ë¬¸ ë¬¸ì²´ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ
const PROFESSIONAL_STYLE_GUIDE = {
  formal_expressions: [
    "ë§ì”€ë“œë¦¬ê³ ì í•©ë‹ˆë‹¤",
    "ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤",
    "ë‹¹ë¶€ë¥¼ ë“œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤",
    "í˜‘ì¡°ë¥¼ ë¶€íƒë“œë¦½ë‹ˆë‹¤",
    "ê°ì‚¬ì˜ ë§ì”€ì„ ì „í•©ë‹ˆë‹¤"
  ],
  transition_phrases: [
    "ë˜í•œ",
    "ë”ë¶ˆì–´",
    "ì•„ìš¸ëŸ¬",
    "íŠ¹íˆ",
    "ë¬´ì—‡ë³´ë‹¤",
    "í•œí¸",
    "ì´ì™€ í•¨ê»˜"
  ],
  polite_endings: [
    "~í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤",
    "~í•´ ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤",
    "~ë¶€íƒë“œë¦½ë‹ˆë‹¤",
    "~ê¸°ì›í•©ë‹ˆë‹¤",
    "~ì‘ì›í•©ë‹ˆë‹¤"
  ]
};

/**
 * ì „ë¬¸ì ì¸ í”„ë¡¬í”„íŠ¸ ìƒì„± í•¨ìˆ˜
 */
function generateProfessionalPrompt(category, data, schoolLevel = 'elementary') {
  console.log('ğŸ” generateProfessionalPrompt í˜¸ì¶œë¨:', { category, schoolLevel });
  console.log('ğŸ” ì‚¬ìš© ê°€ëŠ¥í•œ ì¹´í…Œê³ ë¦¬ í‚¤:', Object.keys(PROFESSIONAL_CATEGORY_PROMPTS));
  
  const categoryInfo = PROFESSIONAL_CATEGORY_PROMPTS[category];
  if (!categoryInfo) {
    console.error('âŒ ì¹´í…Œê³ ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ:', { 
      received: category, 
      available: Object.keys(PROFESSIONAL_CATEGORY_PROMPTS),
      type: typeof category 
    });
    throw new Error(`ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤: ${category}`);
  }
  
  console.log('âœ… ì¹´í…Œê³ ë¦¬ ì •ë³´ ì°¾ìŒ:', categoryInfo.name);

  let prompt = categoryInfo.template;
  
  // ê¸°ë³¸ ë°ì´í„° ì¹˜í™˜
  Object.keys(data).forEach(key => {
    const value = data[key] || '(ì •ë³´ ì—†ìŒ)';
    prompt = prompt.replace(new RegExp(`{${key}}`, 'g'), value);
  });

  // í•™êµê¸‰ë³„ í‘œí˜„ ê°€ì´ë“œ ì¶”ê°€
  const levelExpressions = SCHOOL_LEVEL_EXPRESSIONS[schoolLevel];
  if (levelExpressions) {
    prompt += `\n\n**í•™êµê¸‰ë³„ í‘œí˜„ ê°€ì´ë“œ (${schoolLevel}):**
**ì¸ì‚¬ë§ ì˜ˆì‹œ:** ${levelExpressions.greeting.join(' / ')}
**í•™ìƒ ì–¸ê¸‰ ë°©ì‹:** ${levelExpressions.student_reference.join(' / ')}
**ê²©ë ¤ í‘œí˜„:** ${levelExpressions.encouragement.join(' / ')}
**ë§ˆë¬´ë¦¬ ì¸ì‚¬:** ${levelExpressions.closing.join(' / ')}`;
  }

  // ì „ë¬¸ ë¬¸ì²´ ê°€ì´ë“œ ì¶”ê°€
  prompt += `\n\n**ì „ë¬¸ ë¬¸ì²´ ê°€ì´ë“œ:**
**ê²©ì‹ ìˆëŠ” í‘œí˜„:** ${PROFESSIONAL_STYLE_GUIDE.formal_expressions.join(', ')}
**ìì—°ìŠ¤ëŸ¬ìš´ ì—°ê²°ì–´:** ${PROFESSIONAL_STYLE_GUIDE.transition_phrases.join(', ')}
**ì •ì¤‘í•œ ë§ˆë¬´ë¦¬:** ${PROFESSIONAL_STYLE_GUIDE.polite_endings.join(', ')}

**ìµœì¢… ì ê²€ì‚¬í•­:**
1. êµì‚¬ì˜ ë”°ëœ»í•¨ê³¼ ì „ë¬¸ì„±ì´ ë™ì‹œì— ë“œëŸ¬ë‚˜ëŠ”ê°€?
2. í•™ë¶€ëª¨ê°€ ì½ì—ˆì„ ë•Œ ê°ë™ê³¼ ì‹ ë¢°ë¥¼ ëŠë‚„ ìˆ˜ ìˆëŠ”ê°€?
3. êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì¸ ë‚´ìš©ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ê°€?
4. ì•„ì´ì— ëŒ€í•œ ì• ì •ê³¼ êµìœ¡ì  ê´€ì ì´ ì˜ ë‹´ê²¨ìˆëŠ”ê°€?
5. ë¬¸ì²´ê°€ ì¼ê´€ë˜ê³  í’ˆê²© ìˆëŠ”ê°€?`;

  return prompt;
}

/**
 * ì „ë¬¸ì ì¸ í†µì‹ ë¬¸ ìƒì„± ë©”ì¸ í•¨ìˆ˜
 */
export async function generateProfessionalNotice(requestData, apiKeyOverride = undefined) {
  console.log('ğŸš€ generateProfessionalNotice í˜¸ì¶œë¨');
  console.log('ğŸ“¥ ë°›ì€ requestData =', JSON.stringify(requestData, null, 2));
  console.log('ğŸ” requestData.category =', requestData.category);
  console.log('ğŸ“‹ ì‚¬ìš© ê°€ëŠ¥í•œ ì¹´í…Œê³ ë¦¬ í‚¤ë“¤ =', Object.keys(PROFESSIONAL_CATEGORY_PROMPTS));
  
  try {
    const { 
      category, 
      schoolLevel = 'elementary',
      ...restData 
    } = requestData;
    
    console.log('ğŸ” ì¶”ì¶œëœ ì¹´í…Œê³ ë¦¬:', category);
    console.log('ğŸ“ í•™êµê¸‰:', schoolLevel);
    console.log('ğŸ“ ê¸°íƒ€ ë°ì´í„°:', restData);
    
    // ì…ë ¥ ë°ì´í„° ê²€ì¦
    if (!category) {
      console.error('âŒ ì¹´í…Œê³ ë¦¬ê°€ ëˆ„ë½ë¨');
      throw new Error('ì¹´í…Œê³ ë¦¬ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.');
    }
    
    // ì¹´í…Œê³ ë¦¬ ìœ íš¨ì„± ê²€ì‚¬
    if (!PROFESSIONAL_CATEGORY_PROMPTS[category]) {
      console.error('âŒ ìœ íš¨í•˜ì§€ ì•Šì€ ì¹´í…Œê³ ë¦¬:', {
        received: category,
        type: typeof category,
        available: Object.keys(PROFESSIONAL_CATEGORY_PROMPTS)
      });
      throw new Error(`ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤: ${category}. ì‚¬ìš© ê°€ëŠ¥í•œ ì¹´í…Œê³ ë¦¬: ${Object.keys(PROFESSIONAL_CATEGORY_PROMPTS).join(', ')}`);
    }

    // API í‚¤ ê²€ì¦
    const apiKey = apiKeyOverride || import.meta.env.VITE_GEMINI_API_KEY;
    if (!apiKey || apiKey.trim() === '') {
      throw new Error('Gemini API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„¤ì •ì—ì„œ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    }

    console.log('ğŸ¯ ì „ë¬¸ í”„ë¡¬í”„íŠ¸ ìƒì„± ì‹œì‘');
    // ì „ë¬¸ í”„ë¡¬í”„íŠ¸ ìƒì„±
    const prompt = generateProfessionalPrompt(category, restData, schoolLevel);
    console.log('âœ… í”„ë¡¬í”„íŠ¸ ìƒì„± ì™„ë£Œ');

    console.log('ğŸ¤– AI í†µì‹ ë¬¸ ìƒì„± ì‹œì‘');
    // AIë¥¼ í†µí•œ ì „ë¬¸ í†µì‹ ë¬¸ ìƒì„±
    const generatedContent = await translateWithGemini(prompt, 'ko', apiKey);
    
    if (!generatedContent || generatedContent.trim().length === 0) {
      console.error('âŒ AIê°€ ë¹ˆ ë‚´ìš©ì„ ë°˜í™˜í•¨');
      throw new Error('AIê°€ í†µì‹ ë¬¸ì„ ìƒì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
    }
    console.log('âœ… AI í†µì‹ ë¬¸ ìƒì„± ì™„ë£Œ, ê¸¸ì´:', generatedContent.length);

    console.log('ğŸ¨ HTML ë³€í™˜ ì‹œì‘');
    // ê³ í’ˆì§ˆ HTML ë³€í™˜
    const htmlContent = convertToProfessionalHTML(generatedContent);
    console.log('âœ… HTML ë³€í™˜ ì™„ë£Œ');

    const result = {
      success: true,
      data: {
        introText: PROFESSIONAL_CATEGORY_PROMPTS[category].name,
        content: htmlContent,
        category: PROFESSIONAL_CATEGORY_PROMPTS[category].name,
        description: PROFESSIONAL_CATEGORY_PROMPTS[category].description,
        schoolLevel: schoolLevel,
        generatedAt: new Date().toISOString()
      }
    };
    
    console.log('ğŸ‰ ì „ë¬¸ í†µì‹ ë¬¸ ìƒì„± ì„±ê³µ!');
    console.log('ğŸ“„ ê²°ê³¼ ë°ì´í„°:', {
      introText: result.data.introText,
      contentLength: result.data.content.length,
      category: result.data.category
    });
    
    return result;
  } catch (error) {
    console.error('ì „ë¬¸ í†µì‹ ë¬¸ ìƒì„± ì¤‘ ì˜¤ë¥˜:', error);
    
    // ë” ì¹œí™”ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ ì œê³µ
    let userMessage = 'ì „ë¬¸ í†µì‹ ë¬¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
    
    if (error.message?.includes('API key') || error.message?.includes('Invalid API key')) {
      userMessage = 'Gemini API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•Šê±°ë‚˜ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„¤ì •ì—ì„œ ì˜¬ë°”ë¥¸ API í‚¤ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.';
    } else if (error.message?.includes('quota') || error.message?.includes('429')) {
      userMessage = 'API ì‚¬ìš© í•œë„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ê±°ë‚˜ ë‹¤ë¥¸ ì‹œê°„ì— ì´ìš©í•´ì£¼ì„¸ìš”.';
    } else if (error.message?.includes('network') || error.message?.includes('connection') || error.message?.includes('fetch')) {
      userMessage = 'ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
    } else if (error.message?.includes('rate limit')) {
      userMessage = 'ìš”ì²­ì´ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
    } else if (error.message?.includes('timeout')) {
      userMessage = 'ì‘ë‹µ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
    } else {
      userMessage = error.message || 'ì „ë¬¸ í†µì‹ ë¬¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
    }
    
    return {
      success: false,
      error: userMessage
    };
  }
}

/**
 * ì „ë¬¸ì ì¸ HTML ë³€í™˜ í•¨ìˆ˜
 */
function convertToProfessionalHTML(text) {
  if (!text) return '';
  
  let html = text.replace(/\n/g, '<br>');
  
  // ì œëª© íŒ¨í„´ (1., 2., 3. ë˜ëŠ” **ì œëª©** í˜•ì‹)
  html = html.replace(/^(\d+\.\s*\*\*.*?\*\*)/gm, '<h3 class="notice-section-title">$1</h3>');
  html = html.replace(/^\*\*(.*?)\*\*/gm, '<h3 class="notice-section-title">$1</h3>');
  
  // ê°•ì¡° í‘œì‹œ
  html = html.replace(/\*\*(.*?)\*\*/g, '<strong class="notice-emphasis">$1</strong>');
  
  // ë²ˆí˜¸ ëª©ë¡ (1. 2. 3. í˜•ì‹)
  html = html.replace(/^(\d+\.)\s*([^<\n]*?)(?=<br>|$)/gm, 
    '<p class="notice-list-item"><span class="notice-list-number">$1</span> $2</p>');
  
  // ë¶ˆë¦¿ í¬ì¸íŠ¸ (- ë˜ëŠ” â€¢ í˜•ì‹)
  html = html.replace(/^[â€¢\-]\s*([^<\n]*?)(?=<br>|$)/gm, 
    '<p class="notice-bullet-item"><span class="notice-bullet">â€¢</span> $1</p>');
  
  // ë‹¨ë½ ì •ë¦¬
  html = html.replace(/<br><br>/g, '</p><p>');
  
  // ì „ì²´ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ê°ì‹¸ê¸°
  if (!html.startsWith('<')) {
    html = '<div class="professional-notice-content"><p>' + html + '</p></div>';
  } else {
    html = '<div class="professional-notice-content">' + html + '</div>';
  }
  
  return html;
}

/**
 * ì „ë¬¸ ì¹´í…Œê³ ë¦¬ ëª©ë¡ ë°˜í™˜
 */
export function getProfessionalCategories() {
  return Object.keys(PROFESSIONAL_CATEGORY_PROMPTS).map(key => ({
    id: key,
    name: PROFESSIONAL_CATEGORY_PROMPTS[key].name,
    description: PROFESSIONAL_CATEGORY_PROMPTS[key].description
  }));
}

/**
 * ì¹´í…Œê³ ë¦¬ë³„ í•„ìˆ˜ ì…ë ¥ í•„ë“œ ë°˜í™˜
 */
export function getCategoryRequiredFields(categoryId) {
  const fieldMapping = {
    individual_feedback: ['studentName', 'grade', 'classNumber', 'evaluationPeriod', 'learningAttitude', 'personalityTraits'],
    semester_summary: ['grade', 'classNumber', 'semester', 'majorActivities', 'classCharacteristics'],
    event_announcement: ['eventName', 'eventDate', 'eventLocation', 'eventPurpose'],
    home_education_guide: ['educationTopic', 'educationGoals', 'targetAge', 'homeActivities'],
    life_guidance: ['guidanceTopic', 'currentSituation', 'guidanceGoals', 'specificMethods'],
    safety_education: ['safetyTopic', 'educationBackground', 'educationContent', 'preventionRules']
  };
  
  return fieldMapping[categoryId] || [];
}

/**
 * í•™êµê¸‰ë³„ ë§ì¶¤ ë¬¸êµ¬ ë°˜í™˜
 */
export function getSchoolLevelExpressions(schoolLevel) {
  return SCHOOL_LEVEL_EXPRESSIONS[schoolLevel] || SCHOOL_LEVEL_EXPRESSIONS.elementary;
}