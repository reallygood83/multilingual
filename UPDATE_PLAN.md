# multilingual-app v2.0: 다문화 소통 강화 업데이트 계획서 (PRD)

## 1.0 개요 (Overview)

본 문서는 'multilingual-app'을 단순한 가정통신문 번역기를 넘어, **다문화 가정 학부모와 학교 간의 실질적인 소통을 지원하는 종합 플랫폼**으로 발전시키기 위한 v2.0 업데이트 계획을 정의합니다.

**목표:** AI 기반의 콘텐츠 작성 지원, 정보 전달력 강화, 양방향 소통 채널 마련을 통해 언어와 문화의 장벽을 낮추고 다문화 가정의 학교 활동 참여를 극대화한다.

## 2.0 현황 분석 (Current State Analysis)

- **아키텍처:** React 기반 프론트엔드 (`school-notice-app`) + Node.js 기반 백엔드 (`backend`).
- **핵심 기능:**
    - **AI 기반 번역:** `geminiService.js`를 통해 Gemini API를 직접 호출하여 텍스트를 번역. (백엔드의 모의 번역 API는 개발 초기 단계의 것으로 보임)
    - **PDF 분석 및 생성:** `geminiService.js`를 통해 PDF 템플릿을 분석하고, 이를 기반으로 새로운 공문서 HTML을 생성하는 기능이 존재.
    - **단방향 정보 전달:** 현재는 교사가 문서를 생성하여 다국어로 제공하는 단방향 소통 구조.
- **주요 한계점:**
    - 문화적 맥락이나 교육 용어에 대한 설명 부재.
    - 학부모가 응답이나 질문을 제출할 수 있는 기능 부재.
    - 한국어 원문이 명확하지 않을 경우 번역의 질 저하 우려.

## 3.0 제안 기능 및 구현 방안 (Proposed Features & Implementation Plan)

### 3.1 AI 작성 도우미 (AI Writing Assistant)

**기능:** AI가 가정통신문 초안 작성부터 교정까지 도와주는 기능.

- **세부 기능 1: "쉬운 한국어" 변환**
    - **구현 방안:**
        - **Frontend:** 편집기 상단에 `[쉬운 한국어로 변환]` 체크박스 추가.
        - **Service (`geminiService.js`):** `translateWithGemini`와 유사한 `refineToEasyKorean` 함수를 추가. 이 함수는 Gemini API에 "다음 텍스트를 외국인 학부모가 이해하기 쉽도록, 초등학생 수준의 어휘와 간결한 문장으로 수정해 줘." 와 같은 프롬프트를 전송하여 결과를 받아온다.

- **세부 기능 2: "문화/용어 자동 해설"**
    - **구현 방안:**
        - **Frontend:** `[용어 해설 추가]` 버튼 추가.
        - **Service (`geminiService.js`):** `addCulturalNotes` 함수 추가. "다음 텍스트에서 한국 학교 문화나 교육 시스템에만 존재하는 고유한 용어(예: 창의적 체험활동, 방과 후 학교)를 찾아, 괄호 안에 쉬운 설명을 덧붙여 줘." 라는 프롬프트를 사용.

### 3.2 정보 전달력 강화 (Enhanced Information Delivery)

**기능:** 핵심 정보를 시각적으로 강조하여 전달력을 높이는 기능.

- **세부 기능: "아이콘 기반 핵심 정보 요약"**
    - **구현 방안:**
        - **Frontend:** `SummaryBox.jsx` 라는 새로운 React 컴포넌트 생성.
        - 이 컴포넌트는 최종 문서 텍스트를 props로 받아, `[일시, 장소, 비용, 준비물]` 등의 키워드를 정규식(RegEx)으로 파싱하거나, 간단한 AI 프롬프트를 통해 추출.
        - 추출된 정보 옆에 SVG 아이콘(🗓️, 📍, ₩, 🎒 등)을 함께 표시하여 렌더링.

### 3.3 양방향 소통 (온라인 회신) - *사용자 핵심 관심사*

**기능:** 학부모가 자신의 언어로 회신하고, 교사는 한국어로 받아볼 수 있는 온라인 응답 기능.

#### **접근법 A: Google Forms 연동 (단기적/간편한 방안)**

- **개요:** 교사가 직접 만든 구글 폼을 더 쉽게 활용하도록 돕는 기능.
- **구현 방안:**
    1. **Frontend:** `[구글 폼 번역 도우미]` 버튼 추가.
    2. 교사가 이 버튼을 누르면 나타나는 팝업에 구글 폼 질문들을 붙여넣기 함.
    3. `geminiService.js`의 번역 기능을 활용하여 질문들을 목표 언어들로 일괄 번역.
    4. 교사는 번역된 텍스트를 복사하여 구글 폼 설명에 붙여넣고, 해당 폼 링크를 가정통신문에 포함.
- **장점:** 구현이 매우 간단하고 빠르다.
- **단점:** 교사의 수작업이 필요하며, 학부모의 '응답'을 다시 번역해주는 핵심적인 양방향 소통은 해결되지 않는다.

#### **접근법 B: 자체 온라인 폼 생성 (장기적/궁극적인 방안)**

- **개요:** 프로그램 내에서 직접 다국어 폼을 생성하고 응답을 관리하는 완전한 솔루션.
- **구현 방안:**
    1. **Frontend (UI):**
        - 가정통신문 편집기에 `[응답 폼 추가]` 기능 구현.
        - 교사가 '객관식 질문(동의/비동의)', '단답형 질문(학생 이름)' 등 질문 유형을 선택하여 폼을 동적으로 구성할 수 있는 UI (`FormBuilder.jsx`) 개발.
        - 이 폼 구조는 JSON 형태로 저장.
    2. **Backend (API & DB):**
        - **DB:** `Notices` 테이블 외에, 응답을 저장할 `Responses` 테이블 신규 생성. (`responseId`, `noticeId`, `question`, `answer_original`, `answer_korean`, `language` 등)
        - **API:**
            - `POST /api/responses`: 학부모가 제출한 응답을 저장하는 API. 요청이 들어오면, `answer_original`을 Gemini API로 한국어로 번역하여 `answer_korean` 필드에 함께 저장.
            - `GET /api/notices/:id/responses`: 특정 가정통신문에 달린 모든 응답을 교사에게 보여주는 API. (교사에게는 `answer_korean` 필드 값을 보여줌)
    3. **Frontend (Response Form):**
        - `ResponseForm.jsx` 컴포넌트 개발. `https://.../forms/:noticeId` 와 같은 라우트(Route)를 통해 접근.
        - 이 페이지는 noticeId를 기반으로 폼 구조를 불러와 학부모의 브라우저 언어 설정에 맞춰 다국어로 렌더링.
- **장점:** 진정한 의미의 양방향 소통을 완벽하게 구현. 사용자 경험이 매우 뛰어남.
- **단점:** 프론트엔드, 백엔드, 데이터베이스까지 전반적인 개발이 필요하여 공수가 가장 많이 든다.

## 4.0 업데이트 로드맵 (Update Roadmap)

- **Phase 1 (v2.0 - Quick Wins):**
    - `3.1 AI 작성 도우미` (쉬운 한국어, 용어 해설)
    - `3.2 정보 전달력 강화` (아이콘 요약)
    - *목표: AI를 활용한 콘텐츠 품질 향상에 집중하여 즉각적인 사용자 만족도 증대.*

- **Phase 2 (v2.1 - Core Value):**
    - `3.3 양방향 소통 - 접근법 B` (자체 온라인 폼 생성)
    - *목표: 프로그램의 핵심 가치인 '양방향 소통'을 구현하여 플랫폼의 정체성 확립.*

- **Phase 3 (v2.2 - Enrichment):**
    - `3.3 맞춤형 템플릿 라이브러리` (Phase 1, 2에서 생성된 우수 결과물을 템플릿으로 축적)
    - *목표: 축적된 데이터를 활용하여 콘텐츠 생성을 더욱 용이하게 하고 사용자 편의성 극대화.*

## 5.0 Pro 플랜 기능 제안 (유료 모델)

### 5.1 SNS 공유를 위한 고유 링크 생성

**기능:** 생성된 가정통신문을 카카오톡, 문자 메시지 등으로 쉽게 공유할 수 있도록, AI 요약 메시지와 함께 고유 웹페이지 링크를 생성하는 기능입니다.

- **작동 방식:**
    1.  **링크 생성:** 사용자가 'SNS용 생성' 버튼을 클릭하면, 해당 통신문 내용이 서버 데이터베이스에 저장되고, 이 페이지만을 위한 고유 주소(URL)가 생성됩니다.
    2.  **AI 요약:** AI가 통신문 본문을 2줄 내외의 핵심 내용으로 자동 요약합니다.
    3.  **메시지 조합:** AI 요약문과 고유 링크가 조합된 최종 메시지가 생성되어, 교사가 바로 복사하여 사용할 수 있도록 제공됩니다.
    4.  **웹페이지 뷰어:** 학부모는 링크를 클릭하여, 광고나 방해 요소 없는 깔끔한 웹페이지에서 통신문 전체 내용을 자신의 언어로 확인할 수 있습니다.

- **유료화 근거:**
    - **서버 비용:** 생성된 통신문을 저장하고 언제든 링크를 통해 볼 수 있게 하려면, 24시간 작동하는 데이터베이스와 서버가 필요하며, 이로 인한 호스팅 비용이 발생합니다.
    - **프리미엄 가치:** 교사들이 가장 많이 사용하는 SNS 채널로의 공유 과정을 극도로 편리하게 만들어주는 핵심적인 편의 기능으로 높은 부가가치를 제공합니다.
    - **지속 가능성:** 유료 기능을 통해 발생하는 수익은 모든 사용자를 위한 무료 기능들을 안정적으로 유지하고 발전시키는 데 사용되어, 프로그램의 지속 가능한 성장을 돕습니다.

- **구현 기술 노트:**
    - **백엔드:** Node.js + Express + Supabase(PostgreSQL) 스택을 활용하여 개발.
    - **API:** 통신문 저장을 위한 `POST /api/notices`, 조회를 위한 `GET /api/notices/:id` 엔드포인트 개발 필요.